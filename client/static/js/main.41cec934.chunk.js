(this["webpackJsonprosalyn-web-client"]=this["webpackJsonprosalyn-web-client"]||[]).push([[0],{282:function(e,t,a){e.exports=a(499)},288:function(e,t,a){},289:function(e,t,a){},431:function(e,t,a){},439:function(e,t,a){},496:function(e,t,a){},499:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l);a(287),a(288),a(289),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(19),i=a(63),u=a(39),s=r.a.createContext(),m=a(125),d=a.n(m),f=function(e,t){var a=t.join("/");return"".concat(e,"/").concat(a)},b=function(e,t){var a=Object(n.useState)(!1),r=Object(o.a)(a,2),l=r[0],c=(r[1],Object(n.useState)(null)),i=Object(o.a)(c,2),u=i[0],s=i[1],m=Object(n.useState)(null),b=Object(o.a)(m,2),E=b[0],p=b[1];return[function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a.body,r=a.query,l=a.params,c=a.token;return"get"===e.toLowerCase()?d.a.get(l?f(t,l):t).set("x-auth",c||"").query(r||{}).then((function(e){return s(e),e})).catch(p):d.a[e.toLowerCase()](t).set("x-auth",c||"").send(n||{}).then(s).catch(p)},{loading:l,res:u,err:E}]},E=a(280),p=a(250),g=a(249),y=a(505),v=a(504),h=a(510),O=a(131),j=a(46),k=a(513),S={labelCol:{span:2},wrapperCol:{span:16}},w={wrapperCol:{offset:2,span:16}},I=function(e){var t,a=e.register,l=b("POST",a?"/register":"/login"),c=Object(o.a)(l,2),i=c[0],u=c[1],m=u.loading,d=u.res,f=u.err,E=Object(n.useContext)(s).setUser;return Object(n.useEffect)((function(){var e;(null===d||void 0===d||null===(e=d.body)||void 0===e?void 0:e.token)&&(localStorage.setItem("token",d.body.token),E(d.body))}),[d]),r.a.createElement(p.a,{spinning:m},r.a.createElement(v.a,Object.assign({},S,{name:"login",initialValues:{remember:!0},onFinish:function(e){var t=e.email,a=e.password,n=e.username;m||i({body:{email:t,password:a,username:n}})}}),r.a.createElement(v.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},r.a.createElement(h.a,null)),r.a.createElement(v.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(h.a.Password,null)),a?r.a.createElement(v.a.Item,{label:"Username",name:"username"},r.a.createElement(h.a,null)):r.a.createElement(v.a.Item,Object.assign({name:"remember",valuePropName:"checked"},w),r.a.createElement(O.a,null,"Remember me")),r.a.createElement(v.a.Item,w,r.a.createElement(j.a,{type:"primary",htmlType:"submit"},"Submit"))),f?r.a.createElement(k.a,{message:"Failed",description:JSON.stringify(null===(t=f.response)||void 0===t?void 0:t.text),type:"error"}):"")},C=y.a.TabPane,x=function(){return r.a.createElement(y.a,{defaultActiveKey:"1"},r.a.createElement(C,{tab:"Login",key:"1"},r.a.createElement(I,null)),r.a.createElement(C,{tab:"Register",key:"2"},r.a.createElement(I,{register:!0})))},P=["Guest","User","Uploader","Moderator","Admin"],T=function(e){var t=e.children,a=e.rank,l=void 0===a?"User":a,c=e.exceptions,o=void 0===c?[]:c,i=Object(n.useContext)(s).user,m=Object(u.g)();return i?function(e,t){return P.indexOf(e.rank)>=P.indexOf(t)}(i,l)?t:r.a.createElement(k.a,{message:"Unauthorized",description:"Viewing this page requires a ".concat(l," or higher rank."),type:"error"}):function(e,t){var a,n=Object(g.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(t.indexOf(r)>-1)return!0}}catch(l){n.e(l)}finally{n.f()}return!1}(m.pathname.split("/"),o)?t:r.a.createElement(x,null)},_=a(502),F=a(69),N=a(509),A=a(75),R=a(97),L=a(501),M=a(508),U=a(503),D=a(256),B=a.n(D),G=a(514),z=a(515),H=a(516),W=a(517),q=a(518),K=a(111),J=a.n(K),V=a(257),Y=a.n(V),$=a(67),Q=a.n($),X=r.a.createContext(),Z=function(e){var t=localStorage.getItem("token"),a=e.title,n=e.artist,r=e.duration,l=e.picture,c=e._id,o=e.album;e.musicSrc;return{name:a,singer:n,duration:r,cover:l[0]?"data:".concat(l[0].format,";base64,").concat(l[0].data):Q.a,musicSrc:"/music/download/".concat(t,"/").concat(c),album:o,_id:c}};Y()(J.a);var ee=function(e){var t=e.data,a=e.setData,l=e.allMusic,c=e.loading,i=Object(n.useContext)(X),u=i.playlist,s=i.setPlaylist,m=(i.setPlaylistRaw,i.player),d=i.favorite,f=i.setFavorite,E=Object(n.useState)([]),p=Object(o.a)(E,2),g=p[0],y=p[1],v=Object(n.useState)(""),O=Object(o.a)(v,2),k=O[0],S=O[1],w=Object(n.useState)(""),I=Object(o.a)(w,2),C=I[0],x=I[1],P=b("POST","/music/taste"),T=Object(o.a)(P,1)[0],_={selectedRowKeys:g,onChange:function(e){y(e)}},F=(g.length,""),N=function(e){return{filterDropdown:function(t){var a=t.setSelectedKeys,n=t.selectedKeys,l=t.confirm,c=t.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(h.a,{ref:function(e){F=e},placeholder:"Search ".concat(e),value:n[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return D(n,l,e)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(L.a,null,r.a.createElement(j.a,{type:"primary",onClick:function(){return D(n,l,e)},icon:r.a.createElement(G.a,null),size:"small",style:{width:90}},"Search"),r.a.createElement(j.a,{onClick:function(){return K(c)},size:"small",style:{width:90}},"Reset")))},filterIcon:function(e){return r.a.createElement(G.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return F.select()}))},render:function(t){return C===e?r.a.createElement(B.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[k],autoEscapemode:!0,textToHighlight:t.toString()}):t}}},D=function(e,t,a){t(),S(e[0]),x(a)},K=function(e){e(),S("")},V=[{dataIndex:"picture",key:"picture",render:function(e){return r.a.createElement(M.a,{src:e.length?"data:".concat(e[0].format,";base64,").concat(e[0].data):Q.a})}},Object(A.a)({title:"Title",dataIndex:"title",key:"title",sorter:!0},N("title")),Object(A.a)({title:"Artist",dataIndex:"artist",key:"artist",sorter:!0},N("artist"),{responsive:["md","lg"]}),Object(A.a)({title:"Album",dataIndex:"album",key:"album",sorter:!0},N("album"),{responsive:["lg"]}),{title:"Duration",dataIndex:"duration",key:"duration",render:function(e){return J.a.duration(e,"seconds").format("mm:ss")},responsive:["md","lg"]},{key:"add_to_playlist",render:function(){return r.a.createElement(z.a,null)},onCell:function(e){return{onClick:function(){u.length?m.appendAudio(u.length,[Z(e)]):s([e])}}}},{key:"favor",render:function(e,t){return(null===d||void 0===d?void 0:d.includes(t._id))?r.a.createElement(H.a,null):r.a.createElement(W.a,null)},onCell:function(e){return{onClick:function(){var t=localStorage.getItem("token");(null===d||void 0===d?void 0:d.includes(e._id))?f((function(t){return t.filter((function(t){return t!==e._id}))})):f((function(t){return[].concat(Object(R.a)(t),[e._id])})),T({token:t,body:{musicId:e._id,favor:!0}})}}}},{key:"download",render:function(){return r.a.createElement(q.a,null)},responsive:["md","lg"]}];return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{rowSelection:_,columns:V,dataSource:t.map((function(e){return Object(A.a)({},e,{key:e._id})})),onRow:function(e,t){},onChange:function(e,t,n){var r=n.field,c=n.order;a((function(e){if(!c)return null===l||void 0===l?void 0:l.body;var t=Object(R.a)(e);return t.sort((function(e,t){return"ascend"===c?String(e[r]).localeCompare(String(t[r])):String(t[r]).localeCompare(String(e[r]))})),t}))},loading:c,size:"small"})):""},te=a(511),ae=_.a.Content,ne=function(){var e=b("GET","/music/all"),t=Object(o.a)(e,2),a=t[0],l=t[1],c=l.loading,i=l.res,u=l.err,s=Object(n.useState)(null===i||void 0===i?void 0:i.body),m=Object(o.a)(s,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");a({token:e})}),[]),Object(n.useEffect)((function(){i&&f(i.body),u&&(console.log(u),E.b.error("Failed to load music."))}),[i,u]),r.a.createElement("section",null,r.a.createElement(te.a,{style:{margin:"16px 0"}},r.a.createElement(te.a.Item,null,"Library")),r.a.createElement(_.a,{className:"site-layout-background"},r.a.createElement(ae,{style:{minHeight:280}},r.a.createElement(ee,{data:d,setData:f,allMusic:i,loading:c}))))},re=(a(431),a(77)),le=a(506),ce=a(519),oe=a(520),ie=a(521),ue=a(161),se=a.n(ue),me=le.a.Title,de=function(e){var t=e.audioInfo,a=t.title,l=t.artist,c=t.album,i=t.picture,u=t._id,s=b("POST","/music/share"),m=Object(o.a)(s,2),d=m[0],f=m[1],p=(f.loading,f.res),g=f.err,y=b("POST","/music/taste"),v=Object(o.a)(y,1)[0],h=b("GET","/music/info"),O=Object(o.a)(h,2),j=O[0],k=O[1].res,S=Object(n.useState)(i),w=Object(o.a)(S,2),I=w[0],C=w[1],x=Object(n.useContext)(X),P=x.favorite,T=x.setFavorite;return Object(n.useEffect)((function(){var e;p&&(se()("".concat(window.location.origin,"/share/").concat(null===(e=p.body)||void 0===e?void 0:e.shareId)),E.b.success("Link copied to copyboard"));g&&E.b.error("Failed to generate share link.")}),[p,g]),Object(n.useEffect)((function(){var e=localStorage.getItem("token");j({token:e,params:[u]})}),[u]),Object(n.useEffect)((function(){var e,t,a;(null===k||void 0===k||null===(e=k.body)||void 0===e||null===(t=e.picture)||void 0===t?void 0:t.length)&&(console.log("fucking rendered"),(null===(a=k.body.picture[0])||void 0===a?void 0:a.data)&&C("data:image/jpeg;base64,".concat(k.body.picture[0].data)))}),[k]),r.a.createElement("article",{className:"single-music"},r.a.createElement("div",{className:"music-icon"},r.a.createElement("img",{className:"music-icon-image",alt:"cover",src:I})),r.a.createElement("div",{className:"music-info"},r.a.createElement("div",{className:"music-info-group"},r.a.createElement(me,null,a),r.a.createElement("p",{className:"font-150"},l),r.a.createElement("p",null,c)),r.a.createElement("div",{className:"music-favor"},r.a.createElement("div",{onClick:function(){var e=localStorage.getItem("token");(null===P||void 0===P?void 0:P.includes(u))?T((function(e){return e.filter((function(e){return e!==u}))})):T((function(e){return[].concat(Object(R.a)(e),[u])})),v({token:e,body:{musicId:u,favor:!0}})}},(null===P||void 0===P?void 0:P.includes(u))?r.a.createElement(H.a,null):r.a.createElement(W.a,null)),r.a.createElement("div",null,r.a.createElement(ce.a,null)),r.a.createElement("div",null,r.a.createElement(oe.a,null)),r.a.createElement("div",{onClick:function(){var e=localStorage.getItem("token");d({body:{musicId:u},token:e})}},r.a.createElement(ie.a,null)))))},fe=(_.a.Header,_.a.Content),be=(_.a.Footer,function(e){var t=e.radio,a=e.share,l=b("GET","/music/sample"),c=Object(o.a)(l,2),i=c[0],s=c[1],m=s.loading,f=s.res,g=s.err,y=Object(n.useContext)(X),v=(y.playlist,y.setPlaylist),h=y.setPlaylistRaw,O=y.audioInfo,k=y.setAudioInfo,S=y.player,w=Object(u.g)();return Object(n.useEffect)((function(){if(t){var e=localStorage.getItem("token");S.clear(),i({params:[20],token:e}).then((function(){S.updatePlayIndex(0),S.load()}))}}),[t]),Object(n.useEffect)((function(){if(a&&S){var e=w.pathname.split("/"),t=e[e.length-1];d.a.get("/music/share/".concat(t)).then((function(e){var a=e.body,n=a.title,r=a.artist,l=a.duration,c=a.picture,o=a._id,i=a.album;h([{name:n,singer:r,duration:l,cover:c[0]?"data:".concat(c[0].format,";base64,").concat(c[0].data):Q.a,musicSrc:"/music/shared_file/".concat(t),album:i,_id:o}])})).catch((function(e){console.log(e),E.b.error("Failed to load music.")}))}}),[a,S]),Object(n.useEffect)((function(){if(f){var e=Object(R.a)(f.body);e.sort((function(){return Math.random()-.5})),v(e),k(Object(A.a)({},e[0],{picture:e[0].picture[0]?"data:".concat(e[0].picture[0].format,";base64,").concat(e[0].picture[0].data):Q.a}))}g&&E.b.error("Failed to get playlist")}),[f,g]),r.a.createElement("section",null,r.a.createElement("div",{className:"desktop-only"},r.a.createElement(te.a,{style:{margin:"16px 0"}},r.a.createElement(te.a.Item,null,"Radio"))),r.a.createElement(p.a,{spinning:m},r.a.createElement(_.a,{className:"site-layout-background"},r.a.createElement(fe,{style:{minHeight:280}},O?r.a.createElement(de,{audioInfo:O}):r.a.createElement(re.a,{description:r.a.createElement("span",null,"Nothing is playing")},r.a.createElement(j.a,{type:"primary",onClick:function(){var e=localStorage.getItem("token");S.clear(),i({params:[20],token:e}).then((function(){S.updatePlayIndex(0),S.load()}))}},"Open Radio"))))))}),Ee=(a(439),{labelCol:{span:2},wrapperCol:{span:16}}),pe={wrapperCol:{offset:2,span:16}},ge=function(){var e=b("POST","/library/add"),t=Object(o.a)(e,2),a=t[0],l=t[1],c=l.loading,i=l.res,u=l.err;return Object(n.useEffect)((function(){i&&E.b.success("Successfully added a repository"),u&&E.b.error("Failed to add this repostory.")}),[i,u]),r.a.createElement(p.a,{spinning:c},r.a.createElement(v.a,Object.assign({},Ee,{name:"add_dir",onFinish:function(e){var t=e.path,n=e.rec,r=e.name,l=e.description,c=localStorage.getItem("token");a({body:{path:t,rec:n,name:r,description:l},token:c})}}),r.a.createElement(v.a.Item,{label:"Path",name:"path",rules:[{required:!0,message:"Please input your email!"}],help:"Absolute path of the repository that contains music files on your SERVER."},r.a.createElement(h.a,null)),r.a.createElement(v.a.Item,Object.assign({name:"rec",valuePropName:"checked"},pe),r.a.createElement(O.a,null,"including children repos")),r.a.createElement(v.a.Item,{label:"Name",name:"name"},r.a.createElement(h.a,null)),r.a.createElement(v.a.Item,{label:"Description",name:"description"},r.a.createElement(h.a.TextArea,{rows:10})),r.a.createElement(v.a.Item,pe,r.a.createElement(j.a,{type:"primary",htmlType:"submit"},"Add Library"))))},ye=a(507),ve=localStorage.getItem("token"),he=function(e,t){return[{title:"Path",dataIndex:"path",key:"path"},{title:"Name",dataIndex:"name",key:"name"},{title:"Rec",dataIndex:"rec",key:"rec",render:function(e){return r.a.createElement(O.a,{checked:e,disabled:!0})}},{title:"Count",dataIndex:"count",key:"count"},{title:"Last Modified",dataIndex:"lastModified",key:"lastModified",render:function(e){return J()(e).format("lll")}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(a,n,l){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{type:"primary",onClick:function(){e({body:{path:n.path},token:ve})}},"Update"),r.a.createElement(j.a,{danger:!0,onClick:function(){t(n._id)}},"Remove"))}}]},Oe=function(){var e=b("GET","/library/all"),t=Object(o.a)(e,2),a=t[0],l=t[1].res,c=b("POST","/library/add"),i=Object(o.a)(c,2),u=i[0],s=i[1],m=b("DELETE","/library/remove"),d=Object(o.a)(m,2),f=d[0],g=d[1],y=Object(n.useState)(!1),v=Object(o.a)(y,2),h=v[0],O=v[1];return console.log(l),Object(n.useEffect)((function(){var e=localStorage.getItem("token");a({token:e})}),[]),Object(n.useEffect)((function(){s.res&&E.b.success("Successfully updated your library."),g.res&&E.b.success("Successfully removed your library."),s.err&&E.b.error("Failed to update your library."),g.err&&E.b.error("Failed to remove your library.")}),[s,g]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{spinning:(null===s||void 0===s?void 0:s.loading)||(null===g||void 0===g?void 0:g.loading)},r.a.createElement(U.a,{columns:he(u,O),dataSource:null===l||void 0===l?void 0:l.body.map((function(e){return Object(A.a)({},e,{key:e._id})}))})),r.a.createElement(ye.a,{title:"confirm",visible:h,onCancel:function(){O(!1)},confirmLoading:g.loading,onOk:function(){f({body:{libraryId:h},token:ve})},okButtonProps:{danger:!0}},r.a.createElement("p",null,"This operation is irreversable and is going to remove all music added with this repo.")))},je=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Library Repositories Management"),r.a.createElement(ge,null),r.a.createElement(Oe,null))},ke=function(){return r.a.createElement(i.a,null,r.a.createElement(u.a,{exact:!0,path:"/admin/library"},r.a.createElement(je,null)))},Se=a(45),we=a(276),Ie=(a(440),function(e){var t,a=e.music,n=e.onTrackChange,l=e.getPlayer,c=e.onAudioPlay,o=Object(u.f)();return r.a.createElement(we.a,(t={glassBg:!0,showMediaSession:!0,audioLists:a,autoPlay:!1,mode:window.innerWidth<720?"mini":"full"},Object(Se.a)(t,"mode","full"),Object(Se.a)(t,"showReload",!1),Object(Se.a)(t,"showLyric",!0),Object(Se.a)(t,"showDownload",!1),Object(Se.a)(t,"spaceBar",!0),Object(Se.a)(t,"showThemeSwitch",!1),Object(Se.a)(t,"defaultPosition",{bottom:20,right:10}),Object(Se.a)(t,"onAudioPlayTrackChange",n||function(){}),Object(Se.a)(t,"onAudioError",(function(e){E.b.error("audio error"),console.log(e)})),Object(Se.a)(t,"getAudioInstance",l),Object(Se.a)(t,"onAudioPlay",c),Object(Se.a)(t,"onCoverClick",(function(){o.push("/player")})),Object(Se.a)(t,"onAudioListsChange",(function(e,t,a){console.log(t),console.log(a)})),t))}),Ce=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"This is a preview version of Rosalyn WebClient."),r.a.createElement("p",null,"In short,"),r.a.createElement("h1",null,"What works :"),r.a.createElement("dl",null,r.a.createElement("dd",null,"User system"),r.a.createElement("dd",null,"Basic music player"),r.a.createElement("dd",null,"Radio (random play)")),r.a.createElement("h1",null,"What doesn't work yet:"),r.a.createElement("dl",null,r.a.createElement("dd",null,"Memorized playlist"),r.a.createElement("dd",null,"Favor and playlist"),r.a.createElement("dd",null,"Comment"),r.a.createElement("dd",null,"Preference"),r.a.createElement("dd",null,"Upload your own music"),r.a.createElement("dd",null,"etc.")),r.a.createElement("p",null,"You may also encounter random bugs, please report them to me if you feel like doing it."),r.a.createElement("p",null,"You know how to contact me."),r.a.createElement("p",null,"There is a ghost bug when adding new songs to playlist, while url is correct, il does not load the audio file."),r.a.createElement(j.a,{type:"primary",onClick:function(){localStorage.setItem("welcomed","a")}},"Understandable"))},xe=a(522),Pe=(a(496),function(){var e=Object(u.f)(),t=Object(n.useContext)(X).favorite,a=b("GET","/music/infos"),l=Object(o.a)(a,2),c=l[0],i=l[1],s=i.loading,m=i.res,d=i.err,f=Object(n.useState)(null===m||void 0===m?void 0:m.body),p=Object(o.a)(f,2),g=p[0],y=p[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");t&&c({token:e,params:[JSON.stringify(t)]})}),[t]),Object(n.useEffect)((function(){m&&y(m.body),d&&(console.log(d),E.b.error("Failed to load music."))}),[m,d]),r.a.createElement("div",null,r.a.createElement("h1",null,"Shortcuts"),r.a.createElement("div",{className:"shortcuts"},r.a.createElement("div",{className:"shortcut-group",onClick:function(){e.push("/radio")}},r.a.createElement(M.a,{size:100,icon:r.a.createElement(xe.a,null)}),r.a.createElement("p",null,"Radio"))),r.a.createElement("h1",null,"My favorates"),r.a.createElement(ee,{data:g,setData:y,allMusic:m,loading:s}))}),Te=function(e){var t=localStorage.getItem("token");return e.map((function(e){var a=e.title,n=e.artist,r=e.duration,l=e.picture,c=e._id,o=e.album;e.musicSrc;return{name:a,singer:n,duration:r,cover:l[0]?"data:".concat(l[0].format,";base64,").concat(l[0].data):Q.a,musicSrc:"/music/download/".concat(t,"/").concat(c),album:o,_id:c}}))},_e=_.a.Header,Fe=_.a.Content,Ne=_.a.Footer,Ae=function(){var e=Object(u.f)(),t=Object(u.g)(),a=(localStorage.getItem("playlist"),Object(n.useState)([])),l=Object(o.a)(a,2),c=l[0],i=l[1],s=b("GET","/music/favorite"),m=Object(o.a)(s,2),d=m[0],f=m[1].res,E=Object(n.useState)([]),p=Object(o.a)(E,2),g=p[0],y=p[1],v=Object(n.useState)(null),h=Object(o.a)(v,2),O=h[0],j=h[1],k=Object(n.useState)(null),S=Object(o.a)(k,2),w=S[0],I=S[1],C=Object(n.useState)(!1),x=Object(o.a)(C,2),P=x[0],A=x[1];Object(n.useEffect)((function(){if(t.pathname.match(/^\/share/)&&c.length){var e=c[0],a=e.name,n=e.singer,r=e.cover,l=e.album,o=e._id;document.title="".concat(a," - ").concat(n),j({title:a,artist:n,picture:[r],album:l,_id:o})}}),[c]),Object(n.useEffect)((function(){var e=localStorage.getItem("token");d({token:e})}),[]),Object(n.useEffect)((function(){y(null===f||void 0===f?void 0:f.body)}),[f]);return r.a.createElement(X.Provider,{value:{playlist:c,setPlaylist:function(e){i(Te(e))},setPlaylistRaw:i,audioInfo:O,setAudioInfo:j,player:w,favorite:g,setFavorite:y}},r.a.createElement(_.a,{className:"main-layout"},r.a.createElement(_e,{className:"header"},r.a.createElement("div",{className:"logo"}),r.a.createElement(F.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["/radio"===t.pathname||t.pathname.match(/^\/share/)?"/player":t.pathname],onSelect:function(t){t.item;var a=t.key;e.push(a)}},r.a.createElement(F.a.Item,{key:"/player"},"Player"),r.a.createElement(F.a.Item,{key:"/library"},"Library"),r.a.createElement(F.a.Item,{key:"/mylist"},"My List"),r.a.createElement(F.a.Item,{key:"/setting"},"Setting"))),r.a.createElement(Fe,{style:{padding:"0 1vw"}},r.a.createElement(T,{exceptions:["share"]},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/library"},r.a.createElement(ne,null)),r.a.createElement(u.a,{path:"/player"},r.a.createElement(be,null)),r.a.createElement(u.a,{path:"/radio"},r.a.createElement(be,{radio:!0})),r.a.createElement(u.a,{path:"/share"},r.a.createElement(be,{share:!0})),r.a.createElement(u.a,{path:"/mylist"},r.a.createElement(Pe,null)),r.a.createElement(u.a,{path:"/setting"}),r.a.createElement(u.a,{path:"/admin"},r.a.createElement(T,{rank:"Admin"},r.a.createElement(ke,null))),r.a.createElement(u.a,null,r.a.createElement(ne,null)))),r.a.createElement(N.a,{title:"Hello",placement:"right",visible:P,onClose:function(){A(!1)}},r.a.createElement(Ce,null))),r.a.createElement(Ne,null,r.a.createElement(Ie,{music:c,onTrackChange:function(e,t){var a=t.find((function(t){return t.id===e}));if(a){var n=a.name,r=a.singer,l=a.cover,c=a.album,o=a._id;document.title="".concat(n," - ").concat(r),j({title:n,artist:r,picture:[l],album:c,_id:o})}},getPlayer:function(e){I(e)},onAudioPlay:function(e){if(e){var t=e.name,a=e.singer,n=e.cover,r=e.album,l=e._id;document.title="".concat(t," - ").concat(a),j({title:t,artist:a,picture:[n],album:r,_id:l})}}}))))},Re=function(){return r.a.createElement("main",null,r.a.createElement(Ae,null))},Le=a(512),Me=function(){var e=Object(u.f)();return r.a.createElement(Le.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(j.a,{type:"primary",onClick:function(){e.push("/")}},"Back Home")})},Ue=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],l=t[1],c=b("GET","/me"),m=Object(o.a)(c,2),d=m[0],f=m[1],g=f.loading,y=f.res,v=f.err;return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e&&d({token:e})}),[]),Object(n.useEffect)((function(){y&&(E.b.success("Successfully logging you in."),l(y.body)),v&&E.b.error("Your session has expired.")}),[y,v]),r.a.createElement(p.a,{spinning:g},r.a.createElement(s.Provider,{value:{user:a,setUser:l}},r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/"},r.a.createElement(Re,null)),r.a.createElement(u.a,null,r.a.createElement(Me,null))))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,a){e.exports=a.p+"static/media/note1024.ae6ba5e3.png"}},[[282,1,2]]]);
//# sourceMappingURL=main.41cec934.chunk.js.map